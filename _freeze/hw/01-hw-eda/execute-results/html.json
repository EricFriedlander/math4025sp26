{
  "hash": "b485b5f0c8ee680f79ef5a77a3358514",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Homework 1: Exploratory Data Analysis\"\nauthor: \"My name\"\nformat:\n  html:\n    embed-resources: true\n---\n\n\nAdapted from \"Start teaching with R,\" created by R Pruim, N J Horton, and D Kaplan, 2013, \"Interactive and Dynamic Graphics for Data Analysis,\" by Dianne Cook and Deborah F. Swayne, Colby Long's DATA 325 Course at Wooster College and Maria Tackett's STA-210 course at Duke University.\n\n## Introduction\n\nIn this homework we will familiarize ourselves with the tools that we'll use throughout the course and refresh ourselves on topic related to exploratory data analysis.\n\n## Course Toolkit\n\nThe primary tools we'll be using in this course are Python, VS Code (or Positron), git, and GitHub. We will be using them throughout the course both to learn the concepts discussed in the course and to analyze real data and come to informed conclusions.\n\n::: callout-note\nPython is the name of the programming language itself and VS Code (or Positron) is a convenient interface (IDE).\n:::\n\n::: callout-note\nGit is a version control system (like \"Track Changes\" features from Microsoft Word but more powerful) and GitHub is the home for your Git-based projects on the internet (like Dropbox but much better for code).\n:::\n\nTo make versioning simpler, this homework will be completed individually. In the future, you'll learn about collaborating on GitHub and producing a single homework for your team, but for now, concentrate on getting the basics down.\n\n## Exploratory Data Analysis\n\nOne of the most important components of data science is exploratory data analysis. I really like the following definition, which comes from [this article](https://towardsdatascience.com/exploratory-data-analysis-8fc1cb20fd15) (though it's probably not the original source).\n\n> Exploratory Data Analysis refers to the critical process of performing initial investigations on data so as to discover patterns, spot anomalies, to test hypotheses and to check assumptions with the help of summary statistics and graphical representations.\n\nBefore you begin your exploratory analysis, you may already have a particular question in mind. For example, you might work for an online retailer and want to develop a model to predict which purchased items will be returned. Or, you may not have a particular question in mind. Instead, you might just be asked to look at browsing data for several customers and figure out some way to increase purchases. In either case, before you construct a fancy model, you need to explore and understand your data. This is how you gain new insights and determine if an idea is worth pursuing.\n\n## Learning goals\n\nBy the end of the homework, you will...\n\n-   Be familiar with the workflow using VS Code/Positron and GitHub\n-   Gain practice writing a reproducible report using Quarto\n-   Practice version control using GitHub\n-   Be able to create numerical and visual summaries of data using Python\n-   Use those summaries\n\n# Getting Started\n\n### Accessing Python and VS Code/Positron\n\n-   Ensure you have a working Python installation.\n-   Install [VS Code](https://code.visualstudio.com/) or [Positron](https://github.com/posit-dev/positron).\n-   If using VS Code, install the \"Python\" and \"Quarto\" extensions.\n\n### Set up your GitHub Personal Access Token (PAT)\n\nYou will authenticate GitHub using a Personal Access Token (PAT).\n\n1.  Log in to your GitHub account.\n2.  Go to **Settings** > **Developer settings** > **Personal access tokens** > **Tokens (classic)**.\n3.  Click **Generate new token (classic)**.\n4.  Give it a name (e.g., \"Math4025\") and select the `repo` scope (covers all repo access).\n5.  Click **Generate token**.\n    -   **IMPORTANT**: Copy this token immediately. You won't be able to see it again!\n6.  When Git prompts you for a password in the terminal or VS Code, paste this token instead of your GitHub password.\n\n### Installing git\n\nYou must now install git on your computer. Please follow the directions [here](https://happygitwithr.com/install-git) to install git on your computer.\n\n### Configure git\n\nThere is one more thing we need to do before getting started on the assignment. Specifically, we need to configure your git so that your IDE can communicate with GitHub. This requires two pieces of information: your name and email address.\n\nRun the following commands in your **terminal** (built into VS Code/Positron), replacing with your info:\n\n```bash\ngit config --global user.name \"Your Name\"\ngit config --global user.email \"your.email@example.com\"\n```\n\n## Clone the repo & start new Project\n\n-   Go to the course organization on GitHub. Click on the repo with the prefix **hw-01-**.\n-   Click on the green **CODE** button, copy the HTTPS URL.\n-   In VS Code/Positron, open the Command Palette (Ctrl+Shift+P / Cmd+Shift+P) and run `Git: Clone`.\n-   Paste the URL and select a folder to save it.\n-   Open the cloned folder.\n-   Open `01-hw-eda.qmd`.\n\n## Understanding your data\n\nToday we will be working with the `tips` data set available in the `seaborn` library. The data contains information recorded by one waiter about each tip he received over a period of a few months working in a restaurant. We would like to use this data to address the question, *\"What factors affect tipping behavior?\"*\n\n### Exercise 1\n\n::: {.callout-tip title=\"Question\"}\nWe will use several libraries: `pandas`, `polars`, `seaborn`, `matplotlib`, `plotnine`, and `itables`. Ensure your environment (conda) is active.\nIn the code chunk below, import these libraries and load the `tips` dataset from `seaborn`.\n:::\n\n::: {#e955a55f .cell execution_count=2}\n``` {.python .cell-code}\nimport pandas as pd\nimport polars as pl\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nfrom plotnine import *\nfrom itables import show\n\n# Load dataset\ntips = sns.load_dataset('tips')\n```\n:::\n\n\nWhen exploring a new data set, it's important to first understand the basics. What format is our data in? What types of information are included in the data set? How many observations are there?\n\n### Exercise 2\n\n::: {.callout-tip title=\"Question\"}\nWe can use `pandas` (or `polars`) to inspect the data. `df.info()` gives structure, `df.head()` shows the first few rows.\nCreate a code chunk below to better understand the data. How many tips are recorded? Which days of the week did the waiter work?\n:::\n\nOften, a data set will come with a *code book*. Here are the variables:\n\n| Variable      | Description                               |\n|---------------|-------------------------------------------|\n| `total_bill`  | the cost of the meal in US dollars        |\n| `tip`         | the tip in US dollars                     |\n| `sex`         | gender of the bill payer                  |\n| `smoker`      | whether the party included smokers        |\n| `day`         | day of the week                           |\n| `time`        | time the bill was paid                    |\n| `size`        | size of the party                         |\n\n\n### Exercise 3\n\n::: {.callout-tip title=\"Question\"}\nState a reasonable conjecture about a factor that might affect tipping behavior. What additional information would be helpful to explore that conjecture?\n:::\n\n::: {.callout-warning title=\"Render-Commit-Push\"}\nThis is a good place to render, commit, and push changes. Write an informative commit message (e.g. \"Completed exercises 1 - 3\").\n:::\n\n# Numerical Summaries\n\nWe can specific numerical summaries using `describe()` in pandas/polars, or compute specific stats.\n\n### Exercise 4\n\n::: {.callout-tip title=\"Question\"}\nUse summaries to answer: How many smokers are in the data set? How fancy do you think restaurant is?\n:::\n\nWe can calculate statistics within groups using `groupby()` in pandas or polars.\n\n::: {#91ba3015 .cell execution_count=3}\n``` {.python .cell-code}\n# Pandas\nprint(tips.groupby('time')['tip'].median())\n\n# Polars (convert to polars DataFrame first)\ntips_pl = pl.from_pandas(tips)\nprint(\n    tips_pl.group_by('time').agg(pl.median('tip'))\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntime\nLunch     2.25\nDinner    3.00\nName: tip, dtype: float64\nshape: (2, 2)\n┌────────┬──────┐\n│ time   ┆ tip  │\n│ ---    ┆ ---  │\n│ cat    ┆ f64  │\n╞════════╪══════╡\n│ Lunch  ┆ 2.25 │\n│ Dinner ┆ 3.0  │\n└────────┴──────┘\n```\n:::\n:::\n\n\nWe can use `itables` to make interactive tables:\n\n::: {#83ef5f86 .cell execution_count=4}\n``` {.python .cell-code}\nshow(tips.groupby('time')['tip'].median().reset_index())\n```\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<!--| quarto-html-table-processing: none -->\n<table id=\"itables_d2f08a8a_d98b_4050_b9f5_b20664d87069\"><tbody><tr>\n    <td style=\"vertical-align:middle; text-align:left\">\n    <a href=https://mwouts.github.io/itables/><svg class=\"main-svg\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\nwidth=\"64\" viewBox=\"0 0 500 400\" style=\"font-family: 'Droid Sans', sans-serif;\">\n    <g style=\"fill:#d9d7fc\">\n        <path d=\"M100,400H500V357H100Z\" />\n        <path d=\"M100,300H400V257H100Z\" />\n        <path d=\"M0,200H400V157H0Z\" />\n        <path d=\"M100,100H500V57H100Z\" />\n        <path d=\"M100,350H500V307H100Z\" />\n        <path d=\"M100,250H400V207H100Z\" />\n        <path d=\"M0,150H400V107H0Z\" />\n        <path d=\"M100,50H500V7H100Z\" />\n    </g>\n    <g style=\"fill:#1a1366;stroke:#1a1366;\">\n   <rect x=\"100\" y=\"7\" width=\"400\" height=\"43\">\n    <animate\n      attributeName=\"width\"\n      values=\"0;400;0\"\n      dur=\"5s\"\n      repeatCount=\"indefinite\" />\n      <animate\n      attributeName=\"x\"\n      values=\"100;100;500\"\n      dur=\"5s\"\n      repeatCount=\"indefinite\" />\n  </rect>\n        <rect x=\"0\" y=\"107\" width=\"400\" height=\"43\">\n    <animate\n      attributeName=\"width\"\n      values=\"0;400;0\"\n      dur=\"3.5s\"\n      repeatCount=\"indefinite\" />\n    <animate\n      attributeName=\"x\"\n      values=\"0;0;400\"\n      dur=\"3.5s\"\n      repeatCount=\"indefinite\" />\n  </rect>\n        <rect x=\"100\" y=\"207\" width=\"300\" height=\"43\">\n    <animate\n      attributeName=\"width\"\n      values=\"0;300;0\"\n      dur=\"3s\"\n      repeatCount=\"indefinite\" />\n    <animate\n      attributeName=\"x\"\n      values=\"100;100;400\"\n      dur=\"3s\"\n      repeatCount=\"indefinite\" />\n  </rect>\n        <rect x=\"100\" y=\"307\" width=\"400\" height=\"43\">\n    <animate\n      attributeName=\"width\"\n      values=\"0;400;0\"\n      dur=\"4s\"\n      repeatCount=\"indefinite\" />\n      <animate\n      attributeName=\"x\"\n      values=\"100;100;500\"\n      dur=\"4s\"\n      repeatCount=\"indefinite\" />\n  </rect>\n        <g style=\"fill:transparent;stroke-width:8; stroke-linejoin:round\" rx=\"5\">\n            <g transform=\"translate(45 50) rotate(-45)\">\n                <circle r=\"33\" cx=\"0\" cy=\"0\" />\n                <rect x=\"-8\" y=\"32\" width=\"16\" height=\"30\" />\n            </g>\n\n            <g transform=\"translate(450 152)\">\n                <polyline points=\"-15,-20 -35,-20 -35,40 25,40 25,20\" />\n                <rect x=\"-15\" y=\"-40\" width=\"60\" height=\"60\" />\n            </g>\n\n            <g transform=\"translate(50 352)\">\n                <polygon points=\"-35,-5 0,-40 35,-5\" />\n                <polygon points=\"-35,10 0,45 35,10\" />\n            </g>\n\n            <g transform=\"translate(75 250)\">\n                <polyline points=\"-30,30 -60,0 -30,-30\" />\n                <polyline points=\"0,30 -30,0 0,-30\" />\n            </g>\n\n            <g transform=\"translate(425 250) rotate(180)\">\n                <polyline points=\"-30,30 -60,0 -30,-30\" />\n                <polyline points=\"0,30 -30,0 0,-30\" />\n            </g>\n        </g>\n    </g>\n</svg>\n</a>\n    Loading ITables v2.6.2 from the internet...\n    (need <a href=https://mwouts.github.io/itables/troubleshooting.html>help</a>?)</td>\n    </tr></tbody></table>\n<link href=\"https://www.unpkg.com/dt_for_itables@2.4.0/dt_bundle.css\" rel=\"stylesheet\">\n<script type=\"module\">\n    import { ITable, jQuery as $ } from 'https://www.unpkg.com/dt_for_itables@2.4.0/dt_bundle.js';\n\n    document.querySelectorAll(\"#itables_d2f08a8a_d98b_4050_b9f5_b20664d87069:not(.dataTable)\").forEach(table => {\n        if (!(table instanceof HTMLTableElement))\n            return;\n\n        let dt_args = {\"layout\": {\"topStart\": null, \"topEnd\": null, \"bottomStart\": null, \"bottomEnd\": null}, \"style\": {\"table-layout\": \"auto\", \"width\": \"auto\", \"margin\": \"auto\", \"caption-side\": \"bottom\"}, \"text_in_header_can_be_selected\": true, \"classes\": [\"display\", \"nowrap\"], \"order\": [], \"table_html\": \"<table><thead>\\n    <tr style=\\\"text-align: right;\\\">\\n      \\n      <th>time</th>\\n      <th>tip</th>\\n    </tr>\\n  </thead></table>\", \"data_json\": \"[[\\\"Lunch\\\", 2.25], [\\\"Dinner\\\", 3.0]]\"};\n        new ITable(table, dt_args);\n    });\n</script>\n```\n:::\n:::\n\n\n### Exercise 5\n\n::: {.callout-tip title=\"Question\"}\nCalculate the variance of the tip percentage broken down by day of the week. Do you notice anything unusual?\nNote: You'll first need to create a `tip_pct` column: `tips['tip_pct'] = tips['tip'] / tips['total_bill'] * 100`.\n:::\n\nFor categorical variables, we can use `pd.crosstab`:\n\n::: {#8344caaf .cell execution_count=5}\n``` {.python .cell-code}\nshow(pd.crosstab(tips['smoker'], tips['sex']))\n```\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<!--| quarto-html-table-processing: none -->\n<table id=\"itables_23948756_1cb6_4a1e_a195_14c4ff7231ed\"><tbody><tr>\n    <td style=\"vertical-align:middle; text-align:left\">\n    <a href=https://mwouts.github.io/itables/><svg class=\"main-svg\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\nwidth=\"64\" viewBox=\"0 0 500 400\" style=\"font-family: 'Droid Sans', sans-serif;\">\n    <g style=\"fill:#d9d7fc\">\n        <path d=\"M100,400H500V357H100Z\" />\n        <path d=\"M100,300H400V257H100Z\" />\n        <path d=\"M0,200H400V157H0Z\" />\n        <path d=\"M100,100H500V57H100Z\" />\n        <path d=\"M100,350H500V307H100Z\" />\n        <path d=\"M100,250H400V207H100Z\" />\n        <path d=\"M0,150H400V107H0Z\" />\n        <path d=\"M100,50H500V7H100Z\" />\n    </g>\n    <g style=\"fill:#1a1366;stroke:#1a1366;\">\n   <rect x=\"100\" y=\"7\" width=\"400\" height=\"43\">\n    <animate\n      attributeName=\"width\"\n      values=\"0;400;0\"\n      dur=\"5s\"\n      repeatCount=\"indefinite\" />\n      <animate\n      attributeName=\"x\"\n      values=\"100;100;500\"\n      dur=\"5s\"\n      repeatCount=\"indefinite\" />\n  </rect>\n        <rect x=\"0\" y=\"107\" width=\"400\" height=\"43\">\n    <animate\n      attributeName=\"width\"\n      values=\"0;400;0\"\n      dur=\"3.5s\"\n      repeatCount=\"indefinite\" />\n    <animate\n      attributeName=\"x\"\n      values=\"0;0;400\"\n      dur=\"3.5s\"\n      repeatCount=\"indefinite\" />\n  </rect>\n        <rect x=\"100\" y=\"207\" width=\"300\" height=\"43\">\n    <animate\n      attributeName=\"width\"\n      values=\"0;300;0\"\n      dur=\"3s\"\n      repeatCount=\"indefinite\" />\n    <animate\n      attributeName=\"x\"\n      values=\"100;100;400\"\n      dur=\"3s\"\n      repeatCount=\"indefinite\" />\n  </rect>\n        <rect x=\"100\" y=\"307\" width=\"400\" height=\"43\">\n    <animate\n      attributeName=\"width\"\n      values=\"0;400;0\"\n      dur=\"4s\"\n      repeatCount=\"indefinite\" />\n      <animate\n      attributeName=\"x\"\n      values=\"100;100;500\"\n      dur=\"4s\"\n      repeatCount=\"indefinite\" />\n  </rect>\n        <g style=\"fill:transparent;stroke-width:8; stroke-linejoin:round\" rx=\"5\">\n            <g transform=\"translate(45 50) rotate(-45)\">\n                <circle r=\"33\" cx=\"0\" cy=\"0\" />\n                <rect x=\"-8\" y=\"32\" width=\"16\" height=\"30\" />\n            </g>\n\n            <g transform=\"translate(450 152)\">\n                <polyline points=\"-15,-20 -35,-20 -35,40 25,40 25,20\" />\n                <rect x=\"-15\" y=\"-40\" width=\"60\" height=\"60\" />\n            </g>\n\n            <g transform=\"translate(50 352)\">\n                <polygon points=\"-35,-5 0,-40 35,-5\" />\n                <polygon points=\"-35,10 0,45 35,10\" />\n            </g>\n\n            <g transform=\"translate(75 250)\">\n                <polyline points=\"-30,30 -60,0 -30,-30\" />\n                <polyline points=\"0,30 -30,0 0,-30\" />\n            </g>\n\n            <g transform=\"translate(425 250) rotate(180)\">\n                <polyline points=\"-30,30 -60,0 -30,-30\" />\n                <polyline points=\"0,30 -30,0 0,-30\" />\n            </g>\n        </g>\n    </g>\n</svg>\n</a>\n    Loading ITables v2.6.2 from the internet...\n    (need <a href=https://mwouts.github.io/itables/troubleshooting.html>help</a>?)</td>\n    </tr></tbody></table>\n<link href=\"https://www.unpkg.com/dt_for_itables@2.4.0/dt_bundle.css\" rel=\"stylesheet\">\n<script type=\"module\">\n    import { ITable, jQuery as $ } from 'https://www.unpkg.com/dt_for_itables@2.4.0/dt_bundle.js';\n\n    document.querySelectorAll(\"#itables_23948756_1cb6_4a1e_a195_14c4ff7231ed:not(.dataTable)\").forEach(table => {\n        if (!(table instanceof HTMLTableElement))\n            return;\n\n        let dt_args = {\"layout\": {\"topStart\": null, \"topEnd\": null, \"bottomStart\": null, \"bottomEnd\": null}, \"style\": {\"table-layout\": \"auto\", \"width\": \"auto\", \"margin\": \"auto\", \"caption-side\": \"bottom\"}, \"text_in_header_can_be_selected\": true, \"classes\": [\"display\", \"nowrap\"], \"order\": [], \"table_html\": \"<table><thead>\\n    <tr style=\\\"text-align: right;\\\">\\n      <th>sex</th>\\n      <th>Male</th>\\n      <th>Female</th>\\n    </tr>\\n    <tr>\\n      <th>smoker</th>\\n      <th></th>\\n      <th></th>\\n    </tr>\\n  </thead></table>\", \"data_json\": \"[[\\\"Yes\\\", 60, 33], [\\\"No\\\", 97, 54]]\"};\n        new ITable(table, dt_args);\n    });\n</script>\n```\n:::\n:::\n\n\n### Exercise 6\n\n::: {.callout-tip title=\"Question\"}\nWhich day of the week has the highest *percentage* of tables that are smokers? Hint: use `normalize` argument in `pd.crosstab` or calculate manually.\n:::\n\n::: {.callout-warning title=\"Render-Commit-Push\"}\nRender, commit, and push changes.\n:::\n\n## Graphical Summaries\n\nWe can use `matplotlib`, `seaborn`, or `plotnine`.\n\n**Seaborn (matplotlib-based)**:\n\n::: {#8040d3e9 .cell execution_count=6}\n``` {.python .cell-code}\nsns.countplot(data=tips, x='size')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](01-hw-eda_files/figure-html/cell-7-output-1.png){fig-align='center'}\n:::\n:::\n\n\n**Plotnine (ggplot-style)**:\n\n::: {#f170386d .cell execution_count=7}\n``` {.python .cell-code}\n(ggplot(tips, aes(x='day', fill='smoker'))\n + geom_bar()\n)\n```\n\n::: {.cell-output .cell-output-display execution_count=7}\n![](01-hw-eda_files/figure-html/cell-8-output-1.png){width=672 height=480 fig-align='center'}\n:::\n:::\n\n\n**Histogram**:\n\n::: {#69d0f678 .cell execution_count=8}\n``` {.python .cell-code}\nsns.histplot(data=tips, x='tip', bins=20)\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](01-hw-eda_files/figure-html/cell-9-output-1.png){fig-align='center'}\n:::\n:::\n\n\n### Exercise 7\n\n::: {.callout-tip title=\"Question\"}\nNotice that there are a few \"spikes\" in the histogram above. What do you think is causing this?\n:::\n\nBoxplots and Violin plots:\n\n::: {#d497fb67 .cell execution_count=9}\n``` {.python .cell-code}\nsns.boxplot(data=tips, x='day', y='tip')\nplt.title(\"Tips by Day\")\nplt.show()\n\nsns.violinplot(data=tips, x='day', y='tip')\nplt.title(\"Tips by Day\")\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](01-hw-eda_files/figure-html/cell-10-output-1.png){fig-align='center'}\n:::\n\n::: {.cell-output .cell-output-display}\n![](01-hw-eda_files/figure-html/cell-10-output-2.png){fig-align='center'}\n:::\n:::\n\n\nScatter Matrix (Pairplot):\n\n::: {#d850e14d .cell message='false' execution_count=10}\n``` {.python .cell-code}\nsns.pairplot(tips[['total_bill', 'tip', 'size', 'day']], hue='day')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](01-hw-eda_files/figure-html/cell-11-output-1.png){fig-align='center'}\n:::\n:::\n\n\n### Exercise 8\n\n::: {.callout-tip title=\"Question\"}\nAre there any clear linear relationships in the scatterplots above? What do you think is the explanation for these relationships?\n:::\n\n::: {.callout-warning title=\"Render-Commit-Push\"}\nRender, commit, and push.\n:::\n\n### Exercise 9\n\n::: {.callout-tip title=\"Question\"}\nState a reasonable conjecture about tipping behavior that you would like to explore. Give *at least* one numerical and one graphical summary to explore this conjecture. Use the plotting library of your choice (matplotlib, seaborn, or plotnine).\n:::\n\n::: {.callout-caution}\nBefore you're done with you work, make sure you look it over one last time to make sure the rendered document looks like you want it to!\n:::\n\n",
    "supporting": [
      "01-hw-eda_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}